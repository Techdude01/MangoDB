{% extends "base.html" %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='./css/home.css') }}">    
{% endblock %}

{% block title %}
Mango Homepage
{% endblock %}

{% block body %}
<nav class="navbar">
    <ul>
        <li><a href="{{ url_for('home') }}">Home</a></li>
        <li><a href="{{ url_for('register_route') }}">Register</a></li>
        <li><a href="{{ url_for('most_popular') }}">Most Popular</a></li>
        <li><a href="{{ url_for('most_recent') }}">Most Recent</a></li>
        <li><a href="{{ url_for('most_controversial') }}">Most Controversial</a></li>

    </ul>
</nav>
<div class="main">
    <div class="main-query">
        <h1>Search Bar</h1>
        <h3>Query by Username, Keyword in Question Text, or Tag!</h3>
        <form id="search-form" action="{{ url_for('home') }}" method="get">
            <!-- Search by Username -->
            <div>
                <label for="username">
                    Username:
                </label>
                <input type="text"
                       id="username"
                       name="username"
                       placeholder="Enter username">
            </div>
            <!-- Search by Keyword in Question Text -->
            <div>
                <label for="keyword">
                    Keyword:
                </label>
                <input type="text"
                       id="keyword"
                       name="keyword"
                       placeholder="Enter keyword in question text">
            </div>
            
            <!-- Submit Button -->
            <div class="wrap">
                <button type="button" onclick="validateSearchForm()">
                    Search
                </button>
            </div>
        </form>

        <script>
        function validateSearchForm() {
            var username = document.getElementById("username").value;
            var keyword = document.getElementById("keyword").value;

            if (!username && !keyword) {
                alert("Please enter either a Username or a Keyword to search.");
                return false;
            }

            document.getElementById("search-form").submit();
        }
        </script>
    </div>
    <div class="user-login">
        <h1>User Login</h1>
        <h3>Enter your login credentials</h3>
        <form id="login-form" action="{{ url_for('home') }}" method="post">
            <label for="username">
                Username:
            </label>
            <input type="text"
                   id="username"
                   name="username"
                   placeholder="Enter your Username" required>
    
            <label for="password">
                Password:
            </label>
            <input type="password"
                   id="password"
                   name="password"
                   placeholder="Enter your Password" required>
            <div class="wrap">
                <button type="button" onclick="validateLoginForm()">
                    Login
                </button>
            </div>
            <p><a href="{{ url_for('user_login')}}" style="text-decoration:none">User Login</a></p>
        </form>
    
        <script>
        function validateLoginForm() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
    
            if (!username || !password) {
                alert("Please enter both Username and Password.");
                return false;
            }
    
            document.getElementById("login-form").submit();
        }
        </script>
    </div>  
    <!-- Section for Most Popular Questions -->
    <div class="section">
        <h2><a href="{{ url_for('most_popular') }}">Most Popular</a></h2>
        <ul>
            {% for question in most_popular %}
            <li>
                <a href="{{ url_for('question_detail', question_id=question['questionID']) }}">
                    {{ question['questionText'] }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
     <!-- Section for Most Controversial Questions -->
    <div class="section">
        <h2><a href="{{ url_for('most_controversial') }}">Most Controversial</a></h2>
        <ul>
            {% for question in most_controversial %}
            <li>
                <a href="{{ url_for('question_detail', question_id=question['questionID']) }}">
                    {{ question['questionText'] }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <!-- Section for Most Recent Questions -->
    <div class="section">
        <h2><a href="{{ url_for('most_recent') }}">Most Recent</a></h2>
        <ul>
            {% for question in most_recent %}
            <li>
                <a href="{{ url_for('question_detail', question_id=question['questionID']) }}">
                    {{ question['questionText'] }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>

{% endblock %}
